plugins {
  id 'java-library'
}

group = 'pfe_broker'
version = "${version}"
sourceCompatibility = "${javaVersion}"

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.1'
    // Avro
    implementation group: 'org.apache.avro', name: 'avro', version: '1.11.3'
    implementation group: 'org.apache.avro', name: 'avro-compiler', version: '1.11.3'
    // QuickfixJ
    implementation group: 'org.quickfixj', name: 'quickfixj-core', version: '2.3.1'
    implementation group: 'org.quickfixj', name: 'quickfixj-messages-all', version: '2.3.1'
}

sourceSets {
    main {
        resources {
            srcDirs = ["src/main/resources", project(":").file("config/avro").path]
        }
    }
}


tasks.named('test') {
    useJUnitPlatform()
}

task generateAvro(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'pfe_broker.avro.utils.GenerateAvro'
}
